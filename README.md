# üåü HoloSpot

Sistema de rede social com gamifica√ß√£o e notifica√ß√µes inteligentes.

## ü§ñ **GUIA PARA NOVA IA - LEIA PRIMEIRO!**

Se voc√™ √© uma nova IA assumindo este projeto, **este guia √© essencial** para voc√™ se situar rapidamente e saber exatamente onde fazer altera√ß√µes.

### üìä **Status Atual do Projeto**
**Vers√£o:** v6.0-complete  
**Status:** ‚úÖ 100% Documentado e Organizado  
**√öltima atualiza√ß√£o:** 2025-09-17

**IMPORTANTE:** Este projeto est√° **100% funcional** e **completamente documentado**. N√£o refa√ßa nada do zero - tudo est√° organizado e pronto para uso.

## üö® **REGRAS FUNDAMENTAIS - NUNCA IGNORE!**

### **1. üîç NUNCA ASSUMIR - SEMPRE VERIFICAR**
- ‚ùå **NUNCA** assuma que fun√ß√µes/triggers existem
- ‚ùå **NUNCA** confie apenas na documenta√ß√£o
- ‚úÖ **SEMPRE** extraia estado atual do banco antes de altera√ß√µes
- ‚úÖ **SEMPRE** verifique arquivos no GitHub

### **2. üìÅ PROCESSO OBRIGAT√ìRIO DE COMMITS**
```bash
# ORDEM OBRIGAT√ìRIA:
1. Fazer altera√ß√µes nos arquivos
2. git add .
3. git commit -m "mensagem descritiva"
4. git push
5. S√ì ENT√ÉO fornecer scripts SQL para execu√ß√£o
```

### **3. üóÑÔ∏è TRABALHO COM SUPABASE**
- ‚úÖ **USU√ÅRIO executa** todas as queries no Supabase
- ‚úÖ **IA fornece** scripts prontos para execu√ß√£o
- ‚ùå **NUNCA** executar queries sem commitar no GitHub primeiro
- ‚ùå **NUNCA** assumir que algo foi executado sem confirma√ß√£o

## üéØ **ONDE ENCONTRAR CADA COISA**

### üèóÔ∏è **ESTRUTURA COMPLETA DO PROJETO**
```
holospot/
‚îú‚îÄ‚îÄ index.html              # üì± Frontend principal (HTML + CSS + JavaScript)
‚îú‚îÄ‚îÄ README.md               # üìñ Este arquivo (instru√ß√µes completas)
‚îî‚îÄ‚îÄ sql/                    # üóÑÔ∏è Estrutura completa do banco de dados
    ‚îú‚îÄ‚îÄ functions/          # üîß Fun√ß√µes PostgreSQL (116 fun√ß√µes)
    ‚îÇ   ‚îú‚îÄ‚îÄ ALL_FUNCTIONS.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ triggers/           # ‚ö° Triggers PostgreSQL (29 triggers)
    ‚îÇ   ‚îú‚îÄ‚îÄ ALL_TRIGGERS.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ schema/             # üìã Defini√ß√µes das tabelas (14 tabelas)
    ‚îÇ   ‚îú‚îÄ‚îÄ 01_badges.sql at√© 14_user_streaks.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ data/               # üéÆ Dados iniciais (badges, levels)
    ‚îÇ   ‚îú‚îÄ‚îÄ 01_badges_initial_data.sql
    ‚îÇ   ‚îú‚îÄ‚îÄ 02_levels_initial_data.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ policies/           # üîí Pol√≠ticas RLS de seguran√ßa
    ‚îÇ   ‚îú‚îÄ‚îÄ 01_public_read_policies.sql
    ‚îÇ   ‚îú‚îÄ‚îÄ 02_user_ownership_policies.sql
    ‚îÇ   ‚îú‚îÄ‚îÄ 03_system_operation_policies.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ relationships/      # üîó Mapeamento de foreign keys
    ‚îÇ   ‚îú‚îÄ‚îÄ foreign_keys.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md
    ‚îî‚îÄ‚îÄ README.md           # üìö Documenta√ß√£o da estrutura SQL
```

### üóÑÔ∏è **BANCO DE DADOS (14 TABELAS)**
```
üìä TABELAS PRINCIPAIS:
‚îú‚îÄ‚îÄ profiles              # Perfis dos usu√°rios
‚îú‚îÄ‚îÄ posts                 # Posts do sistema  
‚îú‚îÄ‚îÄ comments              # Coment√°rios nos posts
‚îú‚îÄ‚îÄ reactions             # Rea√ß√µes (likes, etc.)
‚îú‚îÄ‚îÄ feedbacks             # Sistema de feedbacks
‚îú‚îÄ‚îÄ follows               # Sistema de seguir usu√°rios
‚îú‚îÄ‚îÄ user_points           # Pontua√ß√£o dos usu√°rios
‚îú‚îÄ‚îÄ user_badges           # Badges conquistados
‚îú‚îÄ‚îÄ user_streaks          # Streaks de engajamento
‚îú‚îÄ‚îÄ notifications         # Sistema de notifica√ß√µes
‚îú‚îÄ‚îÄ points_history        # Hist√≥rico de pontos
‚îú‚îÄ‚îÄ badges                # Defini√ß√£o dos badges
‚îî‚îÄ‚îÄ levels                # N√≠veis de gamifica√ß√£o
```

### üì± **FRONTEND (Interface do Usu√°rio)**
**Arquivo Principal:** `index.html` (raiz do projeto)

#### **Estrutura do Frontend:**
```html
index.html
‚îú‚îÄ‚îÄ HTML Structure (linhas 1-200)
‚îú‚îÄ‚îÄ CSS Styles (linhas 201-800) 
‚îú‚îÄ‚îÄ JavaScript Logic (linhas 801-2000+)
‚îî‚îÄ‚îÄ Supabase Integration (distribu√≠do no JS)
```

#### **Principais Se√ß√µes do C√≥digo:**
- **Autentica√ß√£o:** Linhas ~850-950 (login/logout)
- **Posts/Holofotes:** Linhas ~1000-1200 (cria√ß√£o e exibi√ß√£o)
- **Coment√°rios:** Linhas ~1200-1400 (sistema de coment√°rios)
- **Rea√ß√µes:** Linhas ~1400-1500 (curtidas/rea√ß√µes)
- **Gamifica√ß√£o:** Linhas ~1500-1700 (pontos, badges, levels)
- **Notifica√ß√µes:** Linhas ~1700-1900 (sistema de notifica√ß√µes)
- **Perfil:** Linhas ~1900-2000+ (dados do usu√°rio)

### üóÑÔ∏è **BACKEND (Banco de Dados)**
**Localiza√ß√£o:** Pasta `sql/` (completamente organizada)

#### **Estrutura do Backend:**
```
sql/
‚îú‚îÄ‚îÄ schema/        # üìã Estruturas das tabelas (14 arquivos)
‚îú‚îÄ‚îÄ functions/     # üîß L√≥gica de neg√≥cio (6 arquivos)
‚îú‚îÄ‚îÄ triggers/      # ‚ö° Automa√ß√£o (6 arquivos)
‚îú‚îÄ‚îÄ policies/      # üîí Seguran√ßa (4 arquivos)
‚îî‚îÄ‚îÄ data/          # üéÆ Dados iniciais (3 arquivos)
```

## üõ†Ô∏è **WORKFLOW OBRIGAT√ìRIO PARA ALTERA√á√ïES**

### **üìã CHECKLIST ANTES DE QUALQUER ALTERA√á√ÉO**
1. ‚úÖ **Ler este README** completamente
2. ‚úÖ **Verificar estrutura** atual no GitHub  
3. ‚úÖ **Extrair estado** do banco se necess√°rio
4. ‚úÖ **Planejar** mudan√ßas sem assumir nada

### **üîÑ PROCESSO PARA ALTERA√á√ïES SQL (CR√çTICO)**
```bash
# ORDEM OBRIGAT√ìRIA - NUNCA INVERTER:

1. üìù Modificar arquivo SQL em sql/
2. üíæ git add .
3. üíæ git commit -m "descri√ß√£o clara"
4. üíæ git push
5. üì§ Fornecer script para usu√°rio executar no Supabase
6. ‚úÖ Aguardar confirma√ß√£o de execu√ß√£o
7. üìã Atualizar documenta√ß√£o se necess√°rio
```

### **üîÑ PROCESSO PARA ALTERA√á√ïES FRONTEND**
```bash
# ORDEM RECOMENDADA:

1. üìù Modificar index.html
2. üß™ Testar no browser (se poss√≠vel)
3. üíæ git add .
4. üíæ git commit -m "descri√ß√£o clara"
5. üíæ git push
6. üìã Documentar mudan√ßa se necess√°rio
```

### **üö® ERROS FATAIS A EVITAR**
- ‚ùå **Executar SQL** sem commitar no GitHub primeiro
- ‚ùå **Assumir** que fun√ß√µes/triggers existem
- ‚ùå **Criar duplica√ß√µes** de c√≥digo
- ‚ùå **Ignorar** a estrutura organizada
- ‚ùå **Commitar** sem testar
- ‚ùå **Criar placeholders** em vez de conte√∫do real

### **‚úÖ BOAS PR√ÅTICAS OBRIGAT√ìRIAS**
- ‚úÖ **Verificar estado atual** antes de alterar
- ‚úÖ **Manter organiza√ß√£o** do GitHub
- ‚úÖ **Fornecer scripts completos** para execu√ß√£o
- ‚úÖ **Documentar mudan√ßas** importantes
- ‚úÖ **Seguir padr√µes** estabelecidos
- ‚úÖ **Testar em ambiente real**

## üîç **COMO EXTRAIR ESTADO ATUAL DO BANCO**

### **üìä Script de Verifica√ß√£o Geral**
```sql
-- Execute no Supabase para verificar estado atual:
SELECT 'FUN√á√ïES' as tipo, COUNT(*) as total 
FROM pg_proc WHERE pronamespace = 'public'::regnamespace
UNION ALL
SELECT 'TRIGGERS', COUNT(*) 
FROM pg_trigger WHERE tgrelid IN (
    SELECT oid FROM pg_class WHERE relnamespace = 'public'::regnamespace
)
UNION ALL
SELECT 'TABELAS', COUNT(*) 
FROM information_schema.tables 
WHERE table_schema = 'public';
```

### **üîß Scripts de Debug Espec√≠ficos**
```sql
-- Verificar fun√ß√£o espec√≠fica:
SELECT proname, prosrc FROM pg_proc 
WHERE proname = 'nome_da_funcao';

-- Verificar triggers de uma tabela:
SELECT trigger_name, event_manipulation, action_statement
FROM information_schema.triggers 
WHERE table_name = 'nome_da_tabela';

-- Verificar estrutura de tabela:
SELECT column_name, data_type, is_nullable 
FROM information_schema.columns 
WHERE table_name = 'nome_da_tabela' 
ORDER BY ordinal_position;
```

## üîß **COMO FAZER ALTERA√á√ïES ESPEC√çFICAS**

### üì± **ALTERA√á√ïES NO FRONTEND**

#### **Para Modificar a Interface:**
1. **Abra:** `index.html`
2. **CSS:** Linhas 201-800 (estilos visuais)
3. **HTML:** Linhas 1-200 (estrutura da p√°gina)

#### **Para Modificar Funcionalidades:**
1. **Abra:** `index.html`
2. **JavaScript:** Linhas 801-2000+
3. **Localize a fun√ß√£o espec√≠fica** (veja mapeamento abaixo)

#### **Principais Se√ß√µes do C√≥digo:**
- **Autentica√ß√£o:** Linhas ~850-950 (login/logout)
- **Posts/Holofotes:** Linhas ~1000-1200 (cria√ß√£o e exibi√ß√£o)
- **Coment√°rios:** Linhas ~1200-1400 (sistema de coment√°rios)
- **Rea√ß√µes:** Linhas ~1400-1500 (curtidas/rea√ß√µes)
- **Gamifica√ß√£o:** Linhas ~1500-1700 (pontos, badges, levels)
- **Notifica√ß√µes:** Linhas ~1700-1900 (sistema de notifica√ß√µes)
- **Perfil:** Linhas ~1900-2000+ (dados do usu√°rio)

### üóÑÔ∏è **ALTERA√á√ïES NO BACKEND**

#### **Para Modificar Estrutura de Tabelas:**
1. **Consulte:** `sql/schema/` 
2. **Encontre a tabela:** `01_badges.sql`, `02_comments.sql`, etc.
3. **Modifique:** Estrutura, campos, constraints

#### **Para Modificar L√≥gica de Neg√≥cio:**
1. **Consulte:** `sql/functions/ALL_FUNCTIONS.sql`
2. **Localize** a fun√ß√£o espec√≠fica (116 fun√ß√µes organizadas)
3. **Modifique** conforme necess√°rio

#### **Para Modificar Automa√ß√£o:**
1. **Consulte:** `sql/triggers/ALL_TRIGGERS.sql`
2. **Localize** o trigger espec√≠fico (29 triggers organizados)
3. **Modifique** conforme necess√°rio

#### **Para Modificar Seguran√ßa:**
1. **Consulte:** `sql/policies/`
2. **Tipos dispon√≠veis:**
   - `01_public_read_policies.sql` - Dados p√∫blicos
   - `02_user_ownership_policies.sql` - Dados privados
   - `03_system_operation_policies.sql` - Opera√ß√µes do sistema

## üö® **TROUBLESHOOTING E DEBUGGING**

### **üîç Problemas de Notifica√ß√µes**
```sql
-- Verificar se triggers est√£o ativos:
SELECT schemaname, tablename, trigger_name, event_manipulation 
FROM information_schema.triggers 
WHERE trigger_schema = 'public' 
ORDER BY table_name;

-- Verificar notifica√ß√µes recentes:
SELECT * FROM notifications 
WHERE created_at > NOW() - INTERVAL '1 hour' 
ORDER BY created_at DESC;
```

### **üîç Problemas de Pontua√ß√£o**
```sql
-- Verificar hist√≥rico de pontos:
SELECT user_id, action_type, points_earned, created_at 
FROM points_history 
WHERE created_at > NOW() - INTERVAL '1 day' 
ORDER BY created_at DESC;

-- Verificar fun√ß√£o update_user_total_points:
SELECT proname, prosrc FROM pg_proc 
WHERE proname = 'update_user_total_points';
```

### **üîç Problemas de Streaks**
```sql
-- Verificar streaks atuais:
SELECT user_id, current_streak, last_activity_date 
FROM user_streaks 
ORDER BY current_streak DESC;

-- Verificar fun√ß√£o de c√°lculo de streak:
SELECT proname, prosrc FROM pg_proc 
WHERE proname LIKE '%streak%';
```

### **üìä Monitoramento do Sistema**
```sql
-- Estat√≠sticas gerais:
SELECT 
    'profiles' as tabela, COUNT(*) as registros FROM profiles
UNION ALL
SELECT 'posts', COUNT(*) FROM posts
UNION ALL
SELECT 'notifications', COUNT(*) FROM notifications
UNION ALL
SELECT 'points_history', COUNT(*) FROM points_history;

-- Verificar usu√°rios ativos:
SELECT COUNT(DISTINCT user_id) as usuarios_ativos 
FROM points_history 
WHERE created_at > NOW() - INTERVAL '7 days';
```

## üîÑ **PROCESSO DE MANUTEN√á√ÉO**

### **üìÖ Rotina Recomendada**
1. **Verificar logs** de erro no Supabase
2. **Monitorar performance** das queries
3. **Revisar notifica√ß√µes** n√£o entregues
4. **Atualizar documenta√ß√£o** se necess√°rio

### **üîß Fluxo de Corre√ß√£o de Bugs**
1. **Problema identificado** ‚Üí Extrair estado atual
2. **An√°lise** ‚Üí Verificar logs e dados
3. **Solu√ß√£o** ‚Üí Criar migration/corre√ß√£o
4. **Commit** ‚Üí GitHub primeiro, sempre
5. **Deploy** ‚Üí Fornecer script para Supabase
6. **Teste** ‚Üí Validar em ambiente real
7. **Documentar** ‚Üí Atualizar se necess√°rio

## üìã **TABELAS PRINCIPAIS E SUAS FUN√á√ïES**

### **Core System (Intera√ß√£o Social):**
- **`profiles`** - Usu√°rios da plataforma
- **`posts`** - Holofotes e reconhecimentos
- **`comments`** - Coment√°rios em posts
- **`reactions`** - Curtidas e rea√ß√µes
- **`follows`** - Relacionamentos sociais

### **Gamification (Sistema de Pontos):**
- **`badges`** - 23 conquistas dispon√≠veis
- **`levels`** - 10 n√≠veis de progress√£o
- **`user_points`** - Pontua√ß√£o de cada usu√°rio
- **`user_badges`** - Badges conquistados
- **`user_streaks`** - Sequ√™ncias de atividade

### **Notifications & History:**
- **`notifications`** - Sistema de notifica√ß√µes
- **`points_history`** - Hist√≥rico de pontua√ß√£o
- **`feedbacks`** - Sistema de feedback

## üéÆ **SISTEMAS IMPLEMENTADOS**

### **üèÜ Sistema de Gamifica√ß√£o**
- **Pontos:** Sistema completo de pontua√ß√£o por a√ß√µes
- **N√≠veis:** Progress√£o autom√°tica baseada em pontos
- **Badges:** Conquistas por crit√©rios espec√≠ficos
- **Streaks:** Dias consecutivos de engajamento
- **Notifica√ß√µes:** Alertas em tempo real para level-ups e milestones

### **‚ö° Funcionalidades T√©cnicas**
- **Triggers autom√°ticos** para atualiza√ß√£o de pontos e n√≠veis
- **Notifica√ß√µes em tempo real** via Supabase
- **Sistema de seguran√ßa** com pol√≠ticas RLS
- **C√°lculo autom√°tico** de streaks e b√¥nus
- **Interface responsiva** para desktop e mobile

### **Sistema de Pontua√ß√£o:**
- **Posts:** 10 pontos base
- **Comments:** 5 pontos base
- **Reactions:** 2 pontos base
- **Feedbacks:** 15 pontos base
- **B√¥nus por raridade de badge:** common(+5), rare(+10), epic(+25), legendary(+50)

### **Badges e Levels:**
- **23 badges** organizados por categoria (milestone, engagement, social, special)
- **10 levels** de Novato (0-99 pontos) a Hall da Fama (32.000+ pontos)
- **Verifica√ß√£o autom√°tica** via triggers

## üìö **DOCUMENTA√á√ÉO COMPLETA**

### **Leitura Obrigat√≥ria:**
1. **`sql/README.md`** - Guia principal do SQL
2. **`sql/functions/README.md`** - Guia de fun√ß√µes
3. **`sql/triggers/README.md`** - Guia de triggers
4. **`sql/schema/README.md`** - Guia de deployment
5. **`sql/policies/README.md`** - Guia de seguran√ßa
6. **`sql/data/README.md`** - Guia de dados iniciais

### **üîó Links Importantes**
- **GitHub Repository:** https://github.com/holospotadm/holospot
- **Supabase Dashboard:** [Configurado pelo usu√°rio]
- **Frontend URL:** [Configurado pelo usu√°rio]

### **üîß Ferramentas Utilizadas**
- **Backend:** Supabase (PostgreSQL)
- **Frontend:** HTML5 + CSS3 + JavaScript (Vanilla)
- **Autentica√ß√£o:** Supabase Auth
- **Real-time:** Supabase Realtime
- **Versionamento:** Git + GitHub

## üéØ **OBJETIVOS ALCAN√áADOS**

Este projeto est√° **100% funcional** e **completamente documentado**:
- ‚úÖ **14 tabelas** documentadas
- ‚úÖ **29 triggers** organizados
- ‚úÖ **116 fun√ß√µes** mapeadas
- ‚úÖ **Pol√≠ticas RLS** configuradas
- ‚úÖ **23 badges + 10 levels** funcionais
- ‚úÖ **Sistema de streaks** autom√°tico
- ‚úÖ **Notifica√ß√µes em tempo real**

## üìû **SUPORTE E CONTATO**

### **üÜò Em Caso de Problemas**
1. **Verificar logs** do Supabase
2. **Consultar documenta√ß√£o** deste README
3. **Extrair estado atual** do banco
4. **Seguir processo** de troubleshooting

### **üìù Reportar Bugs**
1. **Descrever problema** detalhadamente
2. **Incluir logs** relevantes
3. **Especificar ambiente** (produ√ß√£o/desenvolvimento)
4. **Seguir template** de issue no GitHub

---

**ü§ñ Lembre-se: Este projeto est√° completo e funcional. Sua miss√£o √© evoluir, n√£o reconstruir!**

**üåü HoloSpot - Conectando pessoas atrav√©s de gamifica√ß√£o inteligente**

---

*√öltima atualiza√ß√£o: 2025-09-17*  
*Vers√£o: v6.0-complete*  
*Estrutura SQL: Completa e organizada*

